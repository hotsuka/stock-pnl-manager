# Stock P&L Manager - ユーザーガイド

## 目次

1. [はじめに](#1-はじめに)
2. [インストールと初期設定](#2-インストールと初期設定)
3. [基本操作](#3-基本操作)
4. [高度な機能](#4-高度な機能)
5. [メンテナンス](#5-メンテナンス)
6. [トラブルシューティング](#6-トラブルシューティング)

---

## 1. はじめに

### 1.1 Stock P&L Managerとは

Stock P&L Managerは、株式・ETF・投資信託の損益を自動計算・可視化するWebアプリケーションです。SBI証券の取引履歴CSVファイルをインポートするだけで、複雑な損益計算を自動的に行います。

### 1.2 主な機能

#### ポートフォリオ管理
- **保有銘柄の一覧表示**: 現在保有している全銘柄を一目で確認
- **未実現損益の自動計算**: リアルタイムで損益を把握
- **ポートフォリオ構成の可視化**: 円グラフで資産配分を確認

#### 損益分析
- **確定損益の集計**: 売却済み銘柄の損益履歴
- **損益推移グラフ**: 日次・月次での損益の変化を視覚化
- **ベンチマーク比較**: TOPIX、S&P500などとパフォーマンス比較

#### 配当管理
- **配当履歴の自動取得**: Yahoo Financeから配当データを取得
- **配当利回りの計算**: 銘柄別・年度別の配当利回りを表示
- **配当金の集計**: 総配当額と年次推移を確認

#### 株式評価指標
- **財務指標の表示**: PER、PBR、時価総額など12種類の指標
- **リターン指標**: YTD、1年リターンの自動計算
- **タブUI**: 基本情報と評価指標を切り替えて表示

### 1.3 動作環境

#### 必須要件
- **Python**: 3.10以上（推奨: 3.14）
- **OS**: Windows 10/11、macOS 10.15以上、Linux（Ubuntu 20.04以上）
- **メモリ**: 最小2GB（推奨4GB以上）
- **ディスク**: 500MB以上の空き容量

#### 推奨環境
- **ブラウザ**:
  - Google Chrome 最新版
  - Firefox 最新版
  - Microsoft Edge 最新版
  - Safari 14以上
- **画面解像度**: 1280x720以上

---

## 2. インストールと初期設定

### 2.1 インストール手順

#### Step 1: リポジトリのクローン

```bash
# HTTPSでクローン
git clone https://github.com/your-repo/stock-pnl-manager.git
cd stock-pnl-manager

# またはSSHでクローン
git clone git@github.com:your-repo/stock-pnl-manager.git
cd stock-pnl-manager
```

#### Step 2: 仮想環境の作成と有効化

**Windows**:
```bash
# 仮想環境を作成
python -m venv venv

# 仮想環境を有効化
venv\Scripts\activate

# 有効化されたことを確認（プロンプトに (venv) が表示される）
```

**macOS/Linux**:
```bash
# 仮想環境を作成
python3 -m venv venv

# 仮想環境を有効化
source venv/bin/activate

# 有効化されたことを確認（プロンプトに (venv) が表示される）
```

#### Step 3: 依存パッケージのインストール

```bash
# 必要なパッケージを一括インストール
pip install -r requirements.txt

# インストールの確認
pip list
```

**主要パッケージ**:
- Flask 3.0.0 - Webフレームワーク
- SQLAlchemy - データベースORM
- Pandas - データ処理
- yfinance - 株価・配当データ取得
- Plotly - グラフ可視化

#### Step 4: 環境変数の設定

```bash
# .env.exampleをコピーして.envファイルを作成
cp .env.example .env

# Windowsの場合
copy .env.example .env
```

`.env`ファイルを編集して、必要な設定を行います：

```env
# アプリケーション設定
FLASK_APP=run.py
FLASK_ENV=development

# シークレットキーを生成（重要！）
# 以下のコマンドで生成できます
# python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-generated-secret-key-here

# データベース設定
DATABASE_URL=sqlite:///stock_pnl.db

# ログ設定
LOG_LEVEL=INFO
LOG_FILE=flask.log
```

**セキュリティ注意事項**:
- `SECRET_KEY`は必ず変更してください
- `.env`ファイルは`.gitignore`に含まれており、Gitにコミットされません
- 本番環境では`FLASK_ENV=production`に設定してください

#### Step 5: データベースの初期化

```bash
# データベースを初期化
python init_db.py
```

成功すると以下のメッセージが表示されます：
```
Database initialized successfully!
Created tables: transactions, holdings, dividends, realized_pnl, stock_prices, stock_metrics, benchmark_prices
```

#### Step 6: アプリケーションの起動

```bash
# アプリケーションを起動
python run.py
```

以下のメッセージが表示されれば成功です：
```
 * Running on http://127.0.0.1:5000
 * Press CTRL+C to quit
```

ブラウザで `http://localhost:5000` にアクセスしてください。

### 2.2 初回起動時の設定

#### ダッシュボードの確認

初回起動時は、まだデータがないため、ダッシュボードには以下のように表示されます：
- 投資銘柄数: 0
- 総投資額: 0円
- 総評価額: 0円
- 総合損益: 0円

これは正常な状態です。次のステップでデータをインポートします。

---

## 3. 基本操作

### 3.1 CSVファイルのアップロード

Stock P&L Managerの基本は、SBI証券の取引履歴CSVをインポートすることです。

#### SBI証券からのCSVダウンロード方法

1. **SBI証券にログイン**
   - SBI証券のWebサイト（https://www.sbisec.co.jp/）にアクセス
   - ユーザー名とパスワードでログイン

2. **取引履歴ページに移動**
   - 「口座管理」→「取引履歴」を選択
   - 「取引履歴照会」をクリック

3. **CSVファイルをダウンロード**
   - 期間を選択（全期間を推奨）
   - 「CSVダウンロード」ボタンをクリック
   - ファイルを保存（通常は`account_history.csv`など）

#### CSVファイルのインポート手順

1. **アップロードページにアクセス**
   - Stock P&L Managerのトップページから「CSV アップロード」をクリック
   - または直接 `http://localhost:5000/upload` にアクセス

2. **ファイルを選択**
   - 「ファイルを選択」ボタンをクリック
   - ダウンロードしたCSVファイルを選択

3. **アップロード実行**
   - 「アップロード」ボタンをクリック
   - 処理が完了するまで待機（数秒〜数十秒）

4. **結果の確認**
   - 成功メッセージとインポート件数が表示されます
   - 例：「50件の取引をインポートしました」

#### サポートされているCSV形式

**必須カラム**:
- 約定日 / 取引日
- 銘柄コード / ティッカーシンボル
- 銘柄名
- 取引 / 売買
- 数量
- 単価
- 受渡金額

**オプションカラム**:
- 手数料
- 通貨
- 為替レート

**注意事項**:
- 文字コードはUTF-8またはShift-JISに対応
- 英語版CSVと日本語版CSVの両方に対応
- 複数回アップロードしても重複データは自動的にスキップされます

### 3.2 ダッシュボードの見方

ダッシュボードは投資状況を一目で把握できる画面です。

#### サマリーカード

ダッシュボード上部には4つのサマリーカードが表示されます：

1. **投資銘柄数**
   - 総銘柄数：投資したことがある銘柄の総数
   - 保有中：現在保有している銘柄数
   - 売却済：完全に売却済みの銘柄数

2. **総投資額**
   - 全銘柄の購入に使った総額（日本円換算）
   - 内訳：保有中の銘柄 / 売却済みの銘柄

3. **総評価額**
   - 現在の総資産価値（日本円換算）
   - 内訳：保有銘柄の評価額 / 売却代金 / 配当金

4. **総合損益**
   - 未実現損益 + 確定損益 + 配当金の合計
   - 損益率（%）も表示

#### ポートフォリオ構成（円グラフ）

保有銘柄の構成比率を視覚的に表示します：
- 各銘柄の評価額の割合
- 色分けされた見やすいグラフ
- マウスオーバーで詳細情報を表示

#### 損益推移グラフ

期間を選択して損益の推移を確認できます：
- **1ヶ月**: 過去30日間の日次推移
- **1年**: 過去12ヶ月の月次推移
- **ベンチマーク比較**: TOPIX、S&P500との比較（オプション）

**グラフの操作**:
- ズーム：マウスドラッグで拡大
- パン：Shiftキーを押しながらドラッグで移動
- リセット：ダブルクリックで元の表示に戻る
- 凡例クリック：系列の表示/非表示を切り替え

### 3.3 保有銘柄の確認

保有銘柄ページでは、現在保有している全銘柄の詳細を確認できます。

#### 保有銘柄一覧の見方

各銘柄について以下の情報が表示されます：

| 項目 | 説明 |
|------|------|
| ティッカー | 銘柄コード（例: AAPL, 9984.T） |
| 銘柄名 | 会社名または投資信託名 |
| 保有数量 | 現在の保有株数/口数 |
| 平均取得単価 | 購入した際の平均単価（加重平均） |
| 総取得コスト | 取得にかかった総額 |
| 現在価格 | 最新の株価 |
| 現在評価額 | 保有数量 × 現在価格 |
| 未実現損益 | 現在評価額 - 総取得コスト |
| 損益率 | 未実現損益 / 総取得コスト × 100 |
| 通貨 | 取引通貨（JPY, USD, KRW） |

#### 株価の更新

株価は自動的には更新されません。最新の株価を取得するには：

1. **個別更新**: 各銘柄の「更新」ボタンをクリック
2. **一括更新**: ページ上部の「全銘柄の株価を更新」ボタンをクリック

**注意事項**:
- Yahoo Finance APIを使用しているため、市場が閉まっている時間帯は前営業日の終値が表示されます
- 更新には数秒〜数十秒かかる場合があります
- レート制限により、短時間に何度も更新するとエラーになる可能性があります

#### 評価指標の表示

各銘柄の詳細ページでは、2つのタブで情報を切り替えられます：

**基本情報タブ**:
- 保有数量、取得単価、現在価格
- 未実現損益と損益率
- 前日比（変動額と変動率）
- 最終更新日時

**評価指標タブ**:
- **市場データ**: 時価総額、Beta、52週高値/安値
- **バリュエーション**: PER、PBR、配当利回り
- **収益性**: EPS、売上成長率、利益率
- **財務健全性**: ROE、負債資本比率、流動比率
- **リターン**: YTD、1年リターン

**評価指標の更新**:
- 保有銘柄ページの「評価指標を更新」ボタンで一括更新
- 評価指標は1日1回のキャッシュが推奨されます

### 3.4 取引履歴の管理

取引履歴ページでは、全ての売買記録を確認・管理できます。

#### 取引履歴の表示

取引は新しい順に表示されます：
- 約定日
- ティッカー / 銘柄名
- 取引種別（買付 / 売却）
- 数量
- 単価
- 手数料
- 受渡金額
- 通貨

#### フィルタ機能

特定の銘柄の取引のみを表示するには：
1. 検索ボックスにティッカーシンボルまたは銘柄名を入力
2. 自動的にフィルタリングされます

#### 取引の編集

間違って登録した取引や、修正が必要な取引は編集できます：

1. 該当する取引の「編集」ボタンをクリック
2. モーダルダイアログが開きます
3. 修正したい項目を変更
4. 「保存」ボタンをクリック

**編集可能な項目**:
- 約定日
- ティッカーシンボル
- 銘柄名
- 取引種別
- 数量
- 単価
- 手数料
- 受渡金額
- 通貨

**注意事項**:
- 取引を編集すると、関連する保有銘柄と実現損益が自動的に再計算されます
- 重要な取引を編集する場合は、事前にバックアップを取ることを推奨します

#### 取引の削除

不要な取引を削除するには：

1. 削除したい取引のチェックボックスをチェック
2. ページ上部の「選択した取引を削除」ボタンをクリック
3. 確認ダイアログで「OK」をクリック

**注意事項**:
- 削除は元に戻せません
- 削除後、関連する保有銘柄と実現損益が自動的に再計算されます

### 3.5 配当金の確認

配当ページでは、配当金の履歴と集計を確認できます。

#### 配当データの更新

Yahoo Financeから最新の配当データを取得するには：

1. 配当ページにアクセス
2. 「全銘柄の配当データを更新」ボタンをクリック
3. 処理が完了するまで待機

**更新される情報**:
- 権利落ち日（Ex-Dividend Date）
- 支払日（Payment Date）
- 1株あたりの配当額
- 保有数量に基づく受取配当金

#### 配当サマリーの見方

配当サマリーには以下の情報が表示されます：

**銘柄別サマリー**:
- 銘柄名
- 総配当額（日本円換算）
- 総投資額
- 配当利回り（総配当額 / 総投資額）
- 年度別内訳

**全体サマリー**:
- 全銘柄の総配当額
- 全銘柄の総投資額
- ポートフォリオ全体の配当利回り
- 年度別の配当合計

**注意事項**:
- 配当データは実際の入金データではなく、Yahoo Financeから取得した配当情報です
- 税金は考慮されていません（税引前の金額）
- 外国株の配当は現在の為替レートで円換算されます

---

## 4. 高度な機能

### 4.1 損益推移の分析

損益推移ページでは、より詳細な分析が可能です。

#### 表示モードの切り替え

**日次表示（1ヶ月）**:
- 過去30日間の日別データ
- 日々の小さな変動を確認
- 短期的なトレンドの把握

**月次表示（1年）**:
- 過去12ヶ月の月別データ
- 月末時点の評価額で集計
- 長期的なトレンドの把握

#### ベンチマーク比較

自分のポートフォリオと市場指数を比較できます：

**利用可能なベンチマーク**:
- **TOPIX**: 東証株価指数
- **S&P 500**: 米国株式市場の代表的な指数
- **日経225**: 日本の代表的な株価指数（将来実装予定）

**比較の見方**:
- ポートフォリオとベンチマークのリターン率を同じグラフに表示
- 期間開始日を基準（0%）として、その後のリターンを比較
- 自分のポートフォリオがベンチマークを上回っているか一目で確認

**使い方**:
1. 損益推移ページにアクセス
2. 「ベンチマーク比較を表示」にチェック
3. 比較したいベンチマークを選択（複数選択可）
4. グラフが更新されます

#### 日別詳細の表示

特定の日付の詳細を確認するには：

1. グラフ上の任意のポイントをクリック
2. その日の保有銘柄の内訳が表示されます：
   - 各銘柄の保有数量
   - 平均取得単価
   - 現在価格（その日の終値）
   - 評価額
   - 未実現損益

3. サマリー情報：
   - 総評価額
   - 総投資額
   - 未実現損益合計
   - 確定損益累計
   - 配当金累計
   - 総合損益

### 4.2 実現損益の確認

売却済み銘柄の損益を確認できます。

#### 実現損益一覧の見方

| 項目 | 説明 |
|------|------|
| ティッカー / 銘柄名 | 売却した銘柄 |
| 売却数量 | 売却した総数量 |
| 平均取得単価 | 売却時の平均購入単価 |
| 平均売却単価 | 売却時の平均売却単価 |
| 総取得コスト | 売却分の取得にかかった総額（円） |
| 売却代金 | 売却で得た総額（円） |
| 確定損益 | 売却代金 - 総取得コスト |
| 損益率 | 確定損益 / 総取得コスト × 100 |
| 通貨 | 株式の通貨 |

#### 年度別統計

年度別の実現損益統計を確認できます：
- 各年度の総取得コスト
- 各年度の総売却代金
- 各年度の確定損益
- 各年度の損益率
- 全期間の合計

**使い方**:
ダッシュボードの「年度別統計」セクションで確認できます

### 4.3 株式評価指標の活用

各銘柄の評価指標を使って、投資判断の参考にできます。

#### 評価指標の意味

**バリュエーション指標**:

- **PER（株価収益率）**:
  - 株価 ÷ 1株あたり利益
  - 低いほど割安、高いほど割高とされる
  - 一般的に15-25が適正範囲

- **PBR（株価純資産倍率）**:
  - 株価 ÷ 1株あたり純資産
  - 1倍以下は割安、2倍以上は割高とされる
  - 成長企業は高くなる傾向

- **配当利回り**:
  - 年間配当額 ÷ 株価 × 100
  - 高いほど配当が魅力的
  - 3-5%が一般的な範囲

**収益性指標**:

- **EPS（1株あたり利益）**:
  - 当期純利益 ÷ 発行済株式数
  - 大きいほど収益力が高い

- **売上成長率**:
  - 前年比での売上の伸び率
  - プラスは成長、マイナスは縮小

- **利益率**:
  - 当期純利益 ÷ 売上高 × 100
  - 高いほど効率的に利益を上げている
  - 業種により大きく異なる

**財務健全性指標**:

- **ROE（自己資本利益率）**:
  - 当期純利益 ÷ 自己資本 × 100
  - 株主資本の運用効率を示す
  - 10%以上が優良企業の目安

- **負債資本比率**:
  - 負債 ÷ 自己資本
  - 低いほど財務が健全
  - 1倍以下が安全圏

- **流動比率**:
  - 流動資産 ÷ 流動負債
  - 短期的な支払能力を示す
  - 1倍以上が安全圏

**リターン指標**:

- **YTD（年初来リターン）**:
  - 年初からの株価上昇率
  - 今年のパフォーマンスを示す

- **1年リターン**:
  - 過去1年間の株価上昇率
  - 直近のパフォーマンスを示す

#### 評価指標の比較

複数の銘柄の評価指標を比較するには：

1. 保有銘柄ページで「評価指標」タブを選択
2. 各銘柄の指標を並べて確認
3. 同業種の銘柄で比較すると有用

**比較のポイント**:
- 同じ業種・セクター内で比較する
- 一つの指標だけでなく、複数の指標を総合的に判断する
- 指標は過去のデータであり、将来を保証するものではない

### 4.4 データのエクスポート

（将来実装予定）

現在、データのエクスポート機能は実装されていませんが、以下の方法でデータを取り出せます：

#### データベースから直接エクスポート

SQLiteデータベースから直接データを取り出すことができます：

```bash
# データベースファイルの場所
# stock_pnl.db

# SQLiteコマンドでCSV出力（例：保有銘柄）
sqlite3 stock_pnl.db
.headers on
.mode csv
.output holdings.csv
SELECT * FROM holdings;
.quit
```

---

## 5. メンテナンス

### 5.1 データの更新

定期的なデータ更新を行うことで、正確な損益管理ができます。

#### 推奨される更新スケジュール

**毎日（市場営業日）**:
- 株価データの更新
  - 保有銘柄ページの「全銘柄の株価を更新」ボタンをクリック
  - または、以下のコマンドで自動更新：
    ```bash
    python update_prices_manual.py
    ```

**毎週（週末）**:
- 配当データの更新
  ```bash
  python update_dividends.py
  ```

**毎月（月初）**:
- 評価指標の更新
  ```bash
  python update_metrics_returns.py
  ```

**取引のたびに**:
- CSVファイルの再アップロード
  - 新しい取引が発生したら、最新のCSVをアップロード

#### 自動更新の設定（上級者向け）

**Windows（タスクスケジューラ）**:
```batch
# 毎日午後6時に株価を更新
schtasks /create /tn "StockPnL_UpdatePrices" /tr "C:\path\to\venv\Scripts\python.exe C:\path\to\update_prices_manual.py" /sc daily /st 18:00
```

**macOS/Linux（cron）**:
```bash
# crontabを編集
crontab -e

# 毎日午後6時に株価を更新
0 18 * * * /path/to/venv/bin/python /path/to/update_prices_manual.py

# 毎週日曜午前10時に配当を更新
0 10 * * 0 /path/to/venv/bin/python /path/to/update_dividends.py

# 毎月1日午前10時に評価指標を更新
0 10 1 * * /path/to/venv/bin/python /path/to/update_metrics_returns.py
```

### 5.2 データのバックアップ

重要なデータを保護するため、定期的にバックアップを取ることを推奨します。

#### データベースのバックアップ

**手動バックアップ**:
```bash
# データベースファイルをコピー
# Windows
copy stock_pnl.db stock_pnl_backup_20260111.db

# macOS/Linux
cp stock_pnl.db stock_pnl_backup_20260111.db
```

**自動バックアップスクリプト（将来実装予定）**:
```bash
python scripts/backup_database.py
```

#### バックアップの保存場所

推奨される保存場所：
- ローカル: 別のドライブまたはフォルダ
- クラウド: Google Drive、Dropbox、OneDriveなど
- 外部ストレージ: USBメモリ、外付けHDD

**バックアップの頻度**:
- 最低: 月1回
- 推奨: 週1回
- 理想: 毎日（自動化推奨）

#### データの復元

バックアップからデータを復元するには：

1. アプリケーションを停止
   ```bash
   # Ctrl+Cでアプリケーションを停止
   ```

2. 現在のデータベースをバックアップ（念のため）
   ```bash
   copy stock_pnl.db stock_pnl_before_restore.db
   ```

3. バックアップファイルをコピー
   ```bash
   copy stock_pnl_backup_20260111.db stock_pnl.db
   ```

4. アプリケーションを再起動
   ```bash
   python run.py
   ```

### 5.3 パフォーマンスの最適化

データが増えてきた場合、以下の方法でパフォーマンスを改善できます。

#### データベースの最適化

データベースを最適化するには（将来実装予定）：
```bash
python scripts/optimize_database.py
```

現在は、以下のSQLコマンドで手動最適化できます：
```bash
sqlite3 stock_pnl.db "VACUUM;"
sqlite3 stock_pnl.db "ANALYZE;"
```

#### キャッシュのクリア

古いキャッシュデータを削除するには（将来実装予定）：
```bash
python scripts/cleanup_old_data.py
```

#### ログファイルの管理

ログファイルが大きくなりすぎた場合：
```bash
# ログファイルを削除（アプリケーション停止中）
del flask.log  # Windows
rm flask.log   # macOS/Linux

# またはローテーション（10MBごとに自動ローテーション）
# .envファイルで設定
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
```

---

## 6. トラブルシューティング

### 6.1 よくあるエラーと対処法

#### エラー: "ModuleNotFoundError: No module named 'flask'"

**原因**: 依存パッケージがインストールされていない

**対処法**:
```bash
# 仮想環境が有効化されているか確認
# プロンプトに (venv) が表示されているか

# 有効化されていない場合
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

# パッケージを再インストール
pip install -r requirements.txt
```

#### エラー: "OperationalError: no such table: transactions"

**原因**: データベースが初期化されていない

**対処法**:
```bash
# データベースを初期化
python init_db.py
```

#### エラー: "CSVファイルのアップロードに失敗しました"

**原因**: CSVファイルの形式が正しくない

**対処法**:
1. CSVファイルがSBI証券からダウンロードしたものか確認
2. ファイルが破損していないか確認
3. サンプルCSVファイルを使ってテスト
   ```bash
   # data/sample_transactions.csv を使用
   ```

#### エラー: "株価データを取得できませんでした"

**原因**: Yahoo Finance APIに接続できない、またはティッカーシンボルが正しくない

**対処法**:
1. インターネット接続を確認
2. ティッカーシンボルが正しいか確認
   - 日本株: `9984.T`（.T付き）
   - 米国株: `AAPL`
   - 韓国株: `005930.KS`（.KS付き）
3. しばらく時間を置いて再試行

#### エラー: "Port 5000 is already in use"

**原因**: ポート5000が既に使用されている

**対処法**:
```bash
# 別のポートで起動
# run.pyを編集
app.run(debug=True, port=5001)

# または環境変数で指定
export FLASK_RUN_PORT=5001  # macOS/Linux
set FLASK_RUN_PORT=5001     # Windows
python run.py
```

### 6.2 データの整合性チェック

データに問題がある場合、以下のスクリプトで再計算できます：

```bash
# 全銘柄の保有情報を再計算
python recalculate_all.py

# 処理内容：
# - 全取引履歴を読み込み
# - 移動平均法で平均取得単価を再計算
# - 保有数量と未実現損益を更新
# - 実現損益レコードを再作成
```

### 6.3 ログの確認

問題が発生した場合、ログファイルを確認すると原因がわかることがあります：

```bash
# ログファイルの最後の50行を表示
# Windows
powershell -command "Get-Content flask.log -Tail 50"

# macOS/Linux
tail -50 flask.log

# リアルタイムでログを監視
# Windows
powershell -command "Get-Content flask.log -Wait"

# macOS/Linux
tail -f flask.log
```

**ログレベル**:
- **DEBUG**: 詳細なデバッグ情報
- **INFO**: 一般的な情報（デフォルト）
- **WARNING**: 警告
- **ERROR**: エラー
- **CRITICAL**: 重大なエラー

ログレベルを変更するには、`.env`ファイルで設定：
```env
LOG_LEVEL=DEBUG  # より詳細なログを出力
```

### 6.4 サポートとフィードバック

問題が解決しない場合：

1. **GitHubのIssueを確認**
   - 同じ問題が報告されていないか確認
   - https://github.com/your-repo/stock-pnl-manager/issues

2. **新しいIssueを作成**
   - 問題の詳細を記述
   - エラーメッセージをコピー
   - 環境情報（OS、Pythonバージョン）を記載

3. **FAQを確認**
   - [docs/FAQ.md](FAQ.md)に詳しい情報があります

---

## 付録

### A. ショートカットキー

現在、ショートカットキーは実装されていません。将来のバージョンで追加予定です。

### B. 用語集

| 用語 | 説明 |
|------|------|
| ティッカーシンボル | 銘柄を識別するコード（例: AAPL, 9984.T） |
| 未実現損益 | 保有中の銘柄の含み損益 |
| 実現損益 | 売却済みの銘柄の確定損益 |
| 平均取得単価 | 複数回に分けて購入した場合の加重平均単価 |
| 加重平均法 | 購入価格と数量を考慮した平均計算方法 |
| PER | 株価収益率（Price Earnings Ratio） |
| PBR | 株価純資産倍率（Price Book-value Ratio） |
| YTD | 年初来（Year To Date） |
| ベンチマーク | 比較対象となる市場指数 |

### C. システム要件詳細

**Python依存関係**:
```
Flask==3.0.0
Flask-SQLAlchemy==3.1.1
Flask-Migrate==4.0.5
Flask-WTF==1.2.1
pandas>=2.2.0
numpy>=1.26.0
yfinance>=0.2.33
requests==2.31.0
beautifulsoup4==4.12.2
lxml>=6.0.1
plotly==5.18.0
chardet==5.2.0
forex-python==1.8
python-dotenv==1.0.0
pytest>=7.4.3
pytest-cov>=4.1.0
```

**ブラウザ互換性**:
- Chrome 90+
- Firefox 88+
- Edge 90+
- Safari 14+

**データベース**:
- SQLite 3.35.0以上

### D. バージョン履歴

- **v1.0.0** (2026-01-11) - Phase 12実装中
  - APIドキュメント整備完了
  - ユーザーガイド作成

- **v0.11.0** (2026-01-10) - Phase 11
  - ベンチマーク比較機能

- **v0.10.0** (2026-01-09) - Phase 10
  - 株式評価指標表示機能

- **v0.9.0** - Phase 9
  - 機能強化・バグ修正
  - パフォーマンス最適化

---

**最終更新**: 2026-01-11
**バージョン**: 1.0.0
**作成者**: Generated with Claude Code
